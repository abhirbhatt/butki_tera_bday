<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specially For U - Magic Portal</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&display=swap">
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Confetti fallback -->
    <script>
        if (!window.confetti) {
            document.write('<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"><\/script>');
        }
    </script>
    <!-- Lottie animation loader -->
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js" type="module"></script>
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>

<body onload="document.querySelector('.main').style.opacity='1'">
    <div class="main">
        <!-- Background particles -->
        <div class="bg-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>

        <div id="wrapper">
            <!-- Enhanced Password Screen -->
            <div id="password-screen" role="dialog" aria-labelledby="password-title">
                <!-- Floating hearts -->
                <div class="floating-hearts">
                    <div class="heart">ğŸ’–</div>
                    <div class="heart">ğŸ’</div>
                    <div class="heart">ğŸˆ</div>
                    <div class="heart">ğŸŒŸ</div>
                    <div class="heart">âœ¨</div>
                    <div class="heart">ğŸ€</div>
                    <div class="heart">ğŸŒ¸</div>
                    <div class="heart">ğŸ¦„</div>
                    <div class="heart">ğŸ’•</div>
                    <div class="heart">ğŸŒ™</div>
                </div>

                <div id="password-box">
                    <!-- Enhanced sparkles -->
                    <div class="sparkle sparkle-1">âœ¨</div>
                    <div class="sparkle sparkle-2">â­</div>
                    <div class="sparkle sparkle-3">ğŸ’«</div>
                    <div class="sparkle sparkle-4">ğŸŒŸ</div>
                    <div class="sparkle sparkle-5">ğŸ’</div>
                    <div class="sparkle sparkle-6">ğŸ”®</div>

                    <div class="password-header">
                        <div class="crown">
                            <img src="https://c.tenor.com/E2_i2XDqoG4AAAAC/tenor.gif" alt="crown" style="width: 150px;height: 100%;border-radius: 5rem;margin-top:22px">
                        </div>
                        <h2 id="password-title" class="password-title">Type ur name beta</h2>
                    
                        <p class="subtitle-text">âœ¨ aapka naam prachi nahi h ok âœ¨</p>
                    </div>

                    <div class="input-container">
                        <label for="pagePassword" class="sr-only">Type ur name beta</label>
                        <input type="text" id="pagePassword" class="magical-input"
                            placeholder="................type here................" aria-describedby="error-message"
                            maxlength="50" autocomplete="off" />
                        <div class="input-glow"></div>
                    </div>

                    <button class="unlock-btn" onclick="checkPassword()" aria-label="Unlock the magical portal">
                        <span class="btn-text">ğŸ”“ Ab yhe click kro aur ready hojao. </span>
                        <div class="btn-sparkle"></div>
                    </button>

                    <div id="error-message" class="message error-msg" role="alert">
                        <span class="msg-icon">ğŸ’”</span>
                        <p>"gdhi" likho khul jayega"!!!ğŸ˜‚</p>
                    </div>

                    <div id="attempts-message" class="message attempts-msg" role="alert"></div>

                    <!-- Progress indicator -->
                    <div class="progress-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>

            <!-- Transition Layer -->
            <div class="transition-layer" id="transition-layer">
                <dotlottie-wc class="unicorn-lottie"
                    src="https://lottie.host/4286cc33-1611-4564-8792-bf1a6f221491/M9bTWpz8mG.lottie" autoplay loop
                    speed="1" onerror="this.style.display='none'" aria-label="Transition animation">
                </dotlottie-wc>
            </div>

            <!-- Main Content -->
            <div id="main-content" style="display: none">
                <!-- Theme Toggle -->
                <div class="theme-toggle">
                    <button onclick="toggleTheme()" aria-label="Toggle light/dark theme">ğŸŒ™ Toggle Theme</button>
                </div>

                <!-- Header Section -->
                <div class="header-section scroll-section">
                    <div class="header">
                        <h1>ğŸ‰ <span data-i18n="happy_birthday">Happy Birthday!</span> ğŸ‰</h1>
                      <pre><div class="subtitle" >specially for u butki......nichee
 scroll kregi abhi to kuch aur special
       surprise milenge tujhe  
 so be excited for upcoming things 


Sbse phele to aap ye gift open kro
      click kro inko ğŸ‘‡
                        </div></pre>
                    </div>
                        <!-- this is secret pic -->
                         <div class="container">
        <div class="surprise-box" id="surpriseBox">
            <div class="box-lid" id="boxLid">
                <div class="ribbon horizontal"></div>
                <div class="ribbon vertical"></div>
                <div class="bow">
                    <div class="bow-left"></div>
                    <div class="bow-right"></div>
                    <div class="bow-center"></div>
                </div>
            </div>
            <div class="box-base"></div>
            <div class="sparkles">
                <div class="sparkle sparkle-1">âœ¨</div>
                <div class="sparkle sparkle-2">ğŸ’«</div>
                <div class="sparkle sparkle-3">â­</div>
                <div class="sparkle sparkle-4">âœ¨</div>
                <div class="sparkle sparkle-5">ğŸ’«</div>
            </div>
        </div>
        
        <div class="reveal-image" id="revealImage">
            <img src="her_image/shiva.webp" alt="Surprise!" />
            <div class="image-glow"></div>
        </div>
        
        <div class="click-hint">Phele Inka aashirvad loo fir jana niche ab (click kro box ko) âœ¨</div>
                            
    </div>
                </div>

                <!-- MAIN QUESTION SECTION -->
                <div class="question-section scroll-section" id="main-question-section">
                    <div class="question-container">
                        <div class="question-header">
                            <div class="question-icon">ğŸ’•</div>
                            <h2 class="question-title">Ky aap meri patni ho ğŸ˜Š</h2>
                            <p class="question-text">Be honest with your heart... ğŸ’–</p>
                        </div>

                        <div class="question-buttons">
                            <button class="btn-yes" onclick="handleMainQuestionAnswer('yes')">
                                <span class="btn-emoji">ğŸ˜</span>
                                <span class="btn-label">Yes! ğŸ’•</span>
                            </button>
                            <button class="btn-no" onclick="handleMainQuestionAnswer('no')">
                                <span class="btn-emoji">ğŸ˜”</span>
                                <span class="btn-label">No, sorry...</span>
                            </button>
                        </div>

                        <div id="main-question-response" class="question-response">
                            <p id="main-response-text"></p>
                        </div>
                    </div>
                </div>

                <!-- Hidden sections message -->
                <div class="hidden-message" id="hidden-message">
                    <div class="hidden-message-container">
                        <div class="message-icon">ğŸ”’</div>
                        <h3>Choose one option first! ğŸ’–</h3>
                        <p>Please answer the question above to unlock all the surprises waiting for you! âœ¨</p>
                    </div>
                </div>

                <!-- Countdown Section (Initially Hidden) -->
                <div class="countdown-section scroll-section hidden-content" id="countdown-section">
                    <div class="countdown" id="countdown" role="timer">
                        <h2>â° Countdown to Your Special Day â°</h2>
                        <div class="countdown-container">
                            <div class="time-box weeks">
                                <h2 id="weeks-number">0</h2>
                                <p>Weeks</p>
                            </div>
                            <div class="time-box days">
                                <h2 id="days-number">0</h2>
                                <p>Days</p>
                            </div>
                            <div class="time-box hours">
                                <h2 id="hours-number">0</h2>
                                <p>Hours</p>
                            </div>
                            <div class="time-box minutes">
                                <h2 id="minutes-number">0</h2>
                                <p>Minutes</p>
                            </div>
                            <div class="time-box seconds">
                                <h2 id="seconds-number">0</h2>
                                <p>Seconds</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW CONTENT BUTTONS SECTION -->
                <div class="content-buttons-section scroll-section hidden-content" id="content-buttons-section">
                    <div class="content-buttons">
                        <button class="content-btn pics-btn" onclick="showContentSection('pics')">
                            <span class="btn-emoji">ğŸ“¸</span>
                            <span class="btn-label"> Tumari Pics</span>
                        </button>
                        <button class="content-btn shayari-btn" onclick="showContentSection('shayari')">
                            <span class="btn-emoji">ğŸ’</span>
                            <span class="btn-label">Shayari For U</span>
                        </button>
                        <button class="content-btn letter-btn" onclick="showContentSection('letter')">
                            <span class="btn-emoji">ğŸ’Œ</span>
                            <span class="btn-label">Letter For U</span>
                        </button>
                    </div>
                </div>

                <!-- PICS SECTION -->
                <div class="pics-section content-section hidden-content" id="pics-section">
                    <div class="section-header">
                        <h2>ğŸ“¸Ur Pics that I really like  ğŸ“¸</h2>
                        <pre>
                            <p class="natural-heading">Ab tumhe tumari hi photo dikhara hu dekho mera giftğŸ˜‚ğŸ˜</p>
                            <p>tum in pics ko click krskte ho ok ğŸ˜</p>
                        </pre>
                    </div>
                    <div class="pics-gallery">
                        <div class="pic-item">
                            <img src="her_image/1.jpg" alt="Memory 1"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">pyari si mithi ğŸ˜ğŸ’–</div>
                        </div>
                        <div class="pic-item">
                            <img src="her_image/img3.jpg" alt="Memory 2"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">mithi beta gdhi haiğŸŒ¸</div>
                        </div>
                        <div class="pic-item">
                            <img src="her_image/facedil.jpg" alt="Memory 3"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">hyeeee me mara jawa ğŸ˜« âœ¨</div>
                        </div>
                        <div class="pic-item">
                            <img src="her_image/duppata.jpg" alt="Memory 4"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">sanakari bachi ğŸ’•</div>
                        </div>
                        <div class="pic-item">
                            <img src="her_image/collage1.jpg" alt="Memory 5"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">my personal favoutiteğŸ˜ğŸ˜‚</div>
                        </div>
                        <div class="pic-item">
                            <img src="her_image/college2.jpg" alt="Memory 6"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Ab tumne photos nahi di,to repeat krli ğŸ’–</div>
                        </div>
                    </div>
                </div>
                <!-- SHAYARI SECTION -->
                <div class="shayari-section content-section hidden-content" id="shayari-section">
                    <div class="section-header">
                        <h2>ğŸ’ Shayari For You ğŸ’</h2>
                        <p>Words from my heart... ğŸ’–</p>
                    </div>
                    <div class="shayari-container">
                        <div class="shayari-card">
                            <div class="shayari-text">
                                "zamana bhi raazi ho aur tu bhi, ğŸ’«<br>
                                koi aisi hera pheri hojaye! ğŸŒ¸<br>
                                me kamaal krdunga tujhe chahne me ! ğŸ’•
                                agar tu puri trah se meri hojaye! ğŸ‰"

                                i know zyda maska mar rha hu me..
                                 loo next shayari vali balance krdegi ğŸ˜‚
                            </div>
                        </div>
                        <div class="shayari-card">
                            <div class="shayari-text">
                                "jab-jab apki zulfe leharati hai, â˜€ï¸<br>
                                savan ki ghta chah jati hai! ğŸŒ™<br>
                                jb-jb aapki zulfe lehrati hai !
                                savan ki ghta chah jati hai  ğŸ‰"
                                in zulfo ko zra kaabu me krlo ğŸ˜‚
                                kabhi kabhi inse jue bhi nikal aati haiğŸ¤£ğŸ˜‚ğŸŒ¸
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LETTER SECTION -->
                <div class="letter-section content-section hidden-content" id="letter-section">
                    <div class="section-header">
                        <h2>ğŸ’Œ A Letter For You ğŸ’Œ</h2>
                        <p>From my heart ğŸ’–</p>
                    </div>
                    <div class="letter-container">
                        <div class="letter-paper">
                            <div class="letter-header">
                                <h3>My nakhre vaali besti pgluğŸ’•</h3>
                                <div class="letter-date">On your special day...</div>
                            </div>
                            <div class="letter-content">
                                <p>pyari se mithi,ğŸ’–</p>

                                <p>ye last chez h aapke liye but isme me apne mn ki bate aapko khunga aur ek bar firse 
                                    aapko wish krunga ache se ok mithi beta aaj aapko birthday hai but aapko thoda fever 
                                    bhi h toh aap utne khus toh nahi hoge lekin me bhot khus hu kyuki meri itni pgl gdhi bestfrnd- ptni 
                                    ka birthday hai so me bhot excited hu ğŸ˜‡</p>

                                <p>aap aaj k din bhot khus rho aur aane vale or din bhi bhagwan ji kre aap khus rho ok mithi , 
                                    vha aake surprise toh abhi nahi deskta but jb me thoda aur mature hojauna , jb me ek bike lunga 
                                    toh pakka tumse milne aaunga , pr tum gdhi pta nahi miloge ya nahi  âœ¨</p>

                                <p>I really hope tumhe ye thoda sa acha lga hoga meri trf se diya hua ek chota a gift aapke liye 
                                    isme meri sari mehnat h ğŸ˜‡ phele me ek video bnara tha but fir utni photos nahi thi toh vo nahi bnapaya me
                                    toh mene kuch differnt krne ka socha isliye ye bnaya mene , hope u will like it or love it alot  ğŸ’•</p>

                                <p>Once again Happy Birthday gdhi ğŸ‚ May all your dreams come true and may our love grow
                                    stronger with each passing day! ğŸŒŸ</p>

                                <div class="letter-footer">
                                    <p>With all my love and warm love, ğŸ¤—<br />
                                        <strong>Your loving patiğŸ˜‚ ğŸ’–</strong>
                                    </p>

                                    <div class="letter-signature">
                                        <div class="heart-signature">ğŸ’•Ab rest krna okkk ache se  ğŸ’•</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="redirect-button">
                    <span class="redirect-emoji">ğŸ¯</span>
                    <span class="redirect-text">isko click kro !</span>
                    <span class="redirect-arrow">â†‘</span>
                </button>

                <!-- Lightbox for images -->
                <div id="lightbox" class="lightbox" role="dialog" aria-label="Image lightbox">
                    <span class="close-lightbox" onclick="closeLightbox()" aria-label="Close lightbox">&times;</span>
                    <img id="lightbox-img" src="" alt="" />
                </div>
            </div>
        </div>

        <!-- JavaScript -->
        <script>
            // Force page to start at top on every load/refresh
            window.addEventListener('beforeunload', function () {
                window.scrollTo(0, 0);
            });

            window.addEventListener('load', function () {
                setTimeout(() => {
                    window.scrollTo(0, 0);
                    document.documentElement.scrollTop = 0;
                    document.body.scrollTop = 0;
                }, 50);
            });

            // Prevent scroll restoration
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }

            let attemptCount = 0;
            const maxAttempts = 5;
            let isLottiePaused = false;
            const audio = document.getElementById('backgroundMusic');
            const validNames = ['gdhi', 'alice', 'bob', 'bestie', 'princess', 'angel', 'queen'];
            let currentLang = 'en';
            let currentTheme = localStorage.getItem('theme') || 'light';
            let mainQuestionAnswered = false;

            // Enhanced password check with magical effects
            function checkPassword() {
                const pass = document.getElementById('pagePassword').value.trim().toLowerCase();
                const errorMessage = document.getElementById('error-message');
                const attemptsMessage = document.getElementById('attempts-message');
                const passwordScreen = document.getElementById('password-screen');
                const mainContent = document.getElementById('main-content');
                const transitionLayer = document.getElementById('transition-layer');
                const passwordBox = document.getElementById('password-box');

                // Remove previous animations
                passwordBox.classList.remove('shake', 'success');

                if (pass.length < 2) {
                    showError("Please enter your magical name first! ğŸŒŸ", passwordBox);
                    return;
                }

                attemptCount++;

                if (attemptCount >= maxAttempts) {
                    showError("Too many attempts! The magic portal is temporarily closed. ğŸ”’", passwordBox);
                    document.getElementById('pagePassword').disabled = true;
                    document.querySelector('.unlock-btn').disabled = true;
                    document.querySelector('.unlock-btn').innerHTML = '<span class="btn-text">ğŸ”’ Portal Locked</span>';
                    passwordBox.classList.add('locked');
                    return;
                }

                if (validNames.includes(pass)) {
                    // Success - magical entrance
                    errorMessage.style.display = 'none';
                    attemptsMessage.style.display = 'none';
                    passwordBox.classList.add('success');

                    // Success feedback
                    document.querySelector('.unlock-btn .btn-text').textContent = 'âœ… Welcome to Paradise!';
                    document.querySelector('.unlock-btn').style.background = 'linear-gradient(135deg, #10ac84, #00d2d3)';

                    // Create magical confetti effect
                    createMagicalEffect();

                    // Transition sequence
                    setTimeout(() => { transitionLayer.classList.add('active'); }, 400);
                    setTimeout(() => { passwordScreen.classList.add('fade-out'); }, 1600);
                    setTimeout(() => {
                        passwordScreen.style.display = 'none';
                        mainContent.style.display = 'block';
                        transitionLayer.classList.remove('active');



                        document.addEventListener('DOMContentLoaded', function() {
    const surpriseBox = document.getElementById('surpriseBox');
    const revealImage = document.getElementById('revealImage');
    const clickHint = document.querySelector('.click-hint');
    let isOpened = false;

    // Add click event to the surprise box
    surpriseBox.addEventListener('click', function() {
        if (!isOpened) {
            openSurpriseBox();
            isOpened = true;
        }
    });

    // Add hover sound effect (visual feedback)
    surpriseBox.addEventListener('mouseenter', function() {
        if (!isOpened) {
            this.style.transform = 'scale(1.1) rotate(5deg)';
        }
    });

    surpriseBox.addEventListener('mouseleave', function() {
        if (!isOpened) {
            this.style.transform = 'scale(1) rotate(0deg)';
        }
    });

    function openSurpriseBox() {
        // Hide click hint
        clickHint.classList.add('hidden');
        
        // Add opening animation to box
        surpriseBox.classList.add('opening');
        
        // Create magical particles
        createMagicalParticles();
        
        // After lid opens, show the reveal image
        setTimeout(() => {
            revealImage.classList.add('visible');
            
            // Hide the box after image is revealed
            setTimeout(() => {
                surpriseBox.classList.add('opened');
            }, 800);
        }, 800);
    }

    function createMagicalParticles() {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
        
        for (let i = 0; i < 20; i++) {
            setTimeout(() => {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    width: 8px;
                    height: 8px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 1000;
                    left: 50%;
                    top: 50%;
                    transform: translate(-50%, -50%);
                    box-shadow: 0 0 10px currentColor;
                `;
                
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 20;
                const velocity = 100 + Math.random() * 100;
                const lifetime = 2000 + Math.random() * 1000;
                
                let x = 0;
                let y = 0;
                let opacity = 1;
                
                const animate = () => {
                    x += Math.cos(angle) * (velocity / 60);
                    y += Math.sin(angle) * (velocity / 60) + (Math.random() - 0.5) * 2;
                    opacity -= 1 / (lifetime / 16.67);
                    
                    particle.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) scale(${opacity})`;
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        particle.remove();
                    }
                };
                
                requestAnimationFrame(animate);
            }, i * 50);
        }
    }

    // Add some interactive sparkle effects on mouse move
    document.addEventListener('mousemove', function(e) {
        if (!isOpened && Math.random() > 0.95) {
            createTrailSparkle(e.clientX, e.clientY);
        }
    });

    function createTrailSparkle(x, y) {
        const sparkle = document.createElement('div');
        sparkle.textContent = ['âœ¨', 'ğŸ’«', 'â­'][Math.floor(Math.random() * 3)];
        sparkle.style.cssText = `
            position: fixed;
            left: ${x}px;
            top: ${y}px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            animation: trailSparkle 1s ease-out forwards;
        `;
        
        document.body.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 1000);
    }

    // Add CSS for trail sparkle animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes trailSparkle {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) translateY(-30px);
            }
        }
    `;
    document.head.appendChild(style);

    // Add keyboard support (Enter or Space to open)
    document.addEventListener('keydown', function(e) {
        if ((e.key === 'Enter' || e.key === ' ') && !isOpened) {
            e.preventDefault();
            openSurpriseBox();
            isOpened = true;
        }
    });

    // Make the box focusable
    surpriseBox.setAttribute('tabindex', '0');
    surpriseBox.setAttribute('role', 'button');
    surpriseBox.setAttribute('aria-label', 'Click to open surprise box');
});


                        // Start your existing functionality
                        updateCountdown();
                        setInterval(updateCountdown, 1000); // Start countdown timer
                        initScrollMagic();
                        initAOS();
                        trackEvent('Magic Portal Unlocked');
                    }, 2700);

                } else {
                    showError("That's not your magical name, try again! ğŸ’«", passwordBox);
                    attemptsMessage.innerHTML = `<span class="msg-icon">âš ï¸</span> ${maxAttempts - attemptCount} magical attempts remaining`;
                    attemptsMessage.style.display = 'block';
                    attemptsMessage.style.opacity = '1';

                    passwordBox.classList.add('shake');
                    setTimeout(() => {
                        passwordBox.classList.remove('shake');
                    }, 600);
                }
            }


    document.addEventListener('DOMContentLoaded', function() {
    const surpriseBox = document.getElementById('surpriseBox');
    const revealImage = document.getElementById('revealImage');
    const clickHint = document.querySelector('.click-hint');
    let isOpened = false;

    // Add click event to the surprise box
    surpriseBox.addEventListener('click', function() {
        if (!isOpened) {
            openSurpriseBox();
            isOpened = true;
        }
    });

    // Add hover sound effect (visual feedback)
    surpriseBox.addEventListener('mouseenter', function() {
        if (!isOpened) {
            this.style.transform = 'scale(1.1) rotate(5deg)';
        }
    });

    surpriseBox.addEventListener('mouseleave', function() {
        if (!isOpened) {
            this.style.transform = 'scale(1) rotate(0deg)';
        }
    });

    function openSurpriseBox() {
        // Hide click hint
        clickHint.classList.add('hidden');
        
        // Add opening animation to box
        surpriseBox.classList.add('opening');
        
        // Create magical particles
        createMagicalParticles();
        
        // After lid opens, show the reveal image
        setTimeout(() => {
            revealImage.classList.add('visible');
            
            // Hide the box after image is revealed
            setTimeout(() => {
                surpriseBox.classList.add('opened');
            }, 800);
        }, 800);
    }

    function createMagicalParticles() {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
        
        for (let i = 0; i < 20; i++) {
            setTimeout(() => {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    width: 8px;
                    height: 8px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 1000;
                    left: 50%;
                    top: 50%;
                    transform: translate(-50%, -50%);
                    box-shadow: 0 0 10px currentColor;
                `;
                
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 20;
                const velocity = 100 + Math.random() * 100;
                const lifetime = 2000 + Math.random() * 1000;
                
                let x = 0;
                let y = 0;
                let opacity = 1;
                
                const animate = () => {
                    x += Math.cos(angle) * (velocity / 60);
                    y += Math.sin(angle) * (velocity / 60) + (Math.random() - 0.5) * 2;
                    opacity -= 1 / (lifetime / 16.67);
                    
                    particle.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) scale(${opacity})`;
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        particle.remove();
                    }
                };
                
                requestAnimationFrame(animate);
            }, i * 50);
        }
    }

    // Add some interactive sparkle effects on mouse move
    document.addEventListener('mousemove', function(e) {
        if (!isOpened && Math.random() > 0.95) {
            createTrailSparkle(e.clientX, e.clientY);
        }
    });

    function createTrailSparkle(x, y) {
        const sparkle = document.createElement('div');
        sparkle.textContent = ['âœ¨', 'ğŸ’«', 'â­'][Math.floor(Math.random() * 3)];
        sparkle.style.cssText = `
            position: fixed;
            left: ${x}px;
            top: ${y}px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            animation: trailSparkle 1s ease-out forwards;
        `;
        
        document.body.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 1000);
    }

    // Add CSS for trail sparkle animation and countdown pulse
    const style = document.createElement('style');
    style.textContent = `
        @keyframes trailSparkle {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) translateY(-30px);
            }
        }
        @keyframes countdownPulse {
            0%, 100% {
                transform: translateX(-50%) scale(1);
            }
            50% {
                transform: translateX(-50%) scale(1.05);
            }
        }
    `;
    document.head.appendChild(style);

    // Add keyboard support (Enter or Space to open)
    document.addEventListener('keydown', function(e) {
        if ((e.key === 'Enter' || e.key === ' ') && !isOpened) {
            e.preventDefault();
            openSurpriseBox();
            isOpened = true;
        }
    });

    // Make the box focusable
    surpriseBox.setAttribute('tabindex', '0');
    surpriseBox.setAttribute('role', 'button');
    surpriseBox.setAttribute('aria-label', 'Click to open surprise box');
});

            // MAIN QUESTION FUNCTIONALITY
            function handleMainQuestionAnswer(answer) {
                const responseDiv = document.getElementById('main-question-response');
                const responseText = document.getElementById('main-response-text');
                const buttons = document.querySelectorAll('#main-question-section .question-buttons button');
                const hiddenMessage = document.getElementById('hidden-message');
                const noButton = document.querySelector('.btn-no');

                if (answer === 'yes') {
                    // Enable both buttons for future clicks
                    buttons.forEach(btn => btn.disabled = true);
                    mainQuestionAnswered = true;
                    
                    responseText.innerHTML = "ğŸ‰ Ok Patnidevi ji,,chlo ab tumara gift tyaar hai, celebrate your special day! ğŸ’•âœ¨";
                    responseDiv.style.display = 'block';

                    // Fire confetti and show all sections
                    setTimeout(() => {
                        // Massive confetti celebration
                        if (window.confetti) {
                            // Multiple confetti bursts
                            for (let i = 0; i < 5; i++) {
                                setTimeout(() => {
                                    confetti({
                                        particleCount: 200,
                                        spread: 120,
                                        origin: { y: Math.random() * 0.4 + 0.3 },
                                        colors: ['#ff69b4', '#66ccff', '#ffc1e3', '#c5dfff', '#ff9a9e', '#fecfef', '#a8edea']
                                    });
                                }, i * 200);
                            }
                        }
                        // Show all hidden sections only for "yes"
                        revealAllSections();
                    }, 800);
                } else {
                    // Only show message for "no", don't disable buttons
                    responseText.innerHTML = "ğŸ˜ nahi aise nhi chlega phele aap yes click kro wrna kuch nahi dikhega aapko ğŸ˜’ğŸ¤£ğŸ’–";
                    responseDiv.style.display = 'block';
                    // Don't call revealAllSections() here
                }

                // Hide the "choose option" message
                hiddenMessage.style.display = 'none';
            }

            function revealAllSections() {
                console.log('ğŸ¯ Starting to reveal all sections...');
                const hiddenSections = document.querySelectorAll('.hidden-content');
                console.log('ğŸ“Š Found hidden sections:', hiddenSections.length);

                hiddenSections.forEach((section, index) => {
                    console.log(`ğŸ”„ Processing section ${index + 1}:`, section.id);
                    setTimeout(() => {
                        console.log(`âœ… Revealing section:`, section.id);
                        section.classList.remove('hidden-content');
                        section.classList.add('reveal-content');
                        section.style.display = 'block'; // Force display

                        // Special handling for countdown section
                        if (section.id === 'countdown-section') {
                            console.log('â° Special handling for countdown section');
                            setTimeout(() => {
                                document.querySelectorAll('.time-box').forEach(box => {
                                    box.classList.add('animate');
                                });
                            }, 300);
                        }

                        // Special handling for content buttons section
                        if (section.id === 'content-buttons-section') {
                            console.log('ğŸ”˜ Special handling for content buttons section');
                            setTimeout(() => {
                                document.querySelectorAll('.content-btn').forEach(btn => {
                                    btn.classList.add('animate');
                                });
                            }, 300);
                        }
                    }, index * 500);
                });

                // Fire side confetti
                setTimeout(() => {
                    fireSideConfetti();
                }, 1000);
            }

            // CONTENT SECTIONS FUNCTIONALITY
            // CONTENT SECTIONS FUNCTIONALITY - FIXED VERSION
            function showContentSection(sectionType) {
                // DON'T hide sections anymore - just show the clicked one if it's hidden
                const targetSection = document.getElementById(`${sectionType}-section`);

                // Only show if it's currently hidden
                if (targetSection.style.display === 'none' || !targetSection.classList.contains('active-content')) {
                    targetSection.style.display = 'block';

                    // Force reflow
                    targetSection.offsetHeight;

                    // Add animation class
                    targetSection.classList.add('active-content');

                    // NEW CODE: Show redirect button only when "pics" is clicked
                    if (sectionType === 'pics') {
                        const redirectButton = document.getElementById('redirect-button');
                        if (redirectButton) {
                            setTimeout(() => {
                                redirectButton.classList.add('show');
                            }, 500); // Show after 500ms delay
                        }
                    }

                    // Smooth scroll to section
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });

                    // Fire confetti after animation
                    setTimeout(() => {
                        fireSideConfetti();

                        // Add special animations based on section type
                        if (sectionType === 'pics') {
                            document.querySelectorAll('.pic-item').forEach((item, index) => {
                                setTimeout(() => {
                                    item.classList.add('animate');
                                }, index * 100);
                            });
                        } else if (sectionType === 'shayari') {
                            document.querySelectorAll('.shayari-card').forEach((card, index) => {
                                setTimeout(() => {
                                    card.classList.add('animate');
                                }, index * 200);
                            });
                        } else if (sectionType === 'letter') {
                            document.querySelector('.letter-paper').classList.add('animate');
                        }
                    }, 600);

                    trackEvent(`Content Section Viewed: ${sectionType}`);
                } else {
                    // If section is already visible, just scroll to it
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }

            function showError(message, passwordBox) {
                const errorMessage = document.getElementById('error-message');
                const messageSpan = errorMessage.querySelector('span:last-child');
                if (messageSpan) {
                    messageSpan.textContent = message;
                }

                errorMessage.style.display = 'block';
                errorMessage.style.opacity = '1';
                passwordBox.classList.add('shake');

                setTimeout(() => {
                    errorMessage.style.opacity = '0';
                    passwordBox.classList.remove('shake');
                }, 3000);
            }

            function createMagicalEffect() {
                // Enhanced confetti with multiple bursts
                if (window.confetti) {
                    for (let i = 0; i < 3; i++) {
                        setTimeout(() => {
                            confetti({
                                particleCount: 150,
                                spread: 120,
                                origin: { y: Math.random() * 0.4 + 0.3 },
                                colors: ['#ff9a9e', '#fecfef', '#a8edea', '#89f7fe', '#66a6ff']
                            });
                        }, i * 300);
                    }
                }

                // Create sparkle explosion
                for (let i = 0; i < 20; i++) {
                    createSparkle();
                }
            }

            function createSparkle() {
                const sparkle = document.createElement('div');
                sparkle.innerHTML = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’'][Math.floor(Math.random() * 5)];
                sparkle.style.position = 'fixed';
                sparkle.style.fontSize = Math.random() * 20 + 15 + 'px';
                sparkle.style.left = Math.random() * window.innerWidth + 'px';
                sparkle.style.top = Math.random() * window.innerHeight + 'px';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '9999';
                sparkle.style.animation = 'sparkleFloat 2s ease-out forwards';

                document.body.appendChild(sparkle);

                setTimeout(() => {
                    document.body.removeChild(sparkle);
                }, 2000);
            }

            // Enter key functionality
            document.getElementById('pagePassword').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    checkPassword();
                }
            });

            // Add sparkle float animation to head
            const style = document.createElement('style');
            style.textContent = `
                @keyframes sparkleFloat {
                    0% { 
                        opacity: 1; 
                        transform: scale(1) rotate(0deg) translateY(0); 
                    }
                    100% { 
                        opacity: 0; 
                        transform: scale(0.3) rotate(360deg) translateY(-100px); 
                    }
                }
            `;
            document.head.appendChild(style);

            // Your existing functions
            const translations = {
                en: {
                    happy_birthday: 'Happy Birthday!',
                    specially_for_u: 'Specially For U ğŸ’–'
                }
            };

            function initScrollMagic() {
                const headerSection = document.querySelector('.header-section');
                const mainQuestionSection = document.getElementById('main-question-section');

                function handleScroll() {
                    const scrollY = window.scrollY;
                    const windowHeight = window.innerHeight;

                    if (scrollY > windowHeight * 0.2) {
                        headerSection.classList.add('scrolled');
                    } else {
                        headerSection.classList.remove('scrolled');
                    }

                    // Show main question section after header
                    if (scrollY > windowHeight * 0.3 && !mainQuestionSection.classList.contains('animate')) {
                        mainQuestionSection.classList.add('animate');
                    }
                }

                window.addEventListener('scroll', handleScroll);
                handleScroll();
            }

            function initAOS() {
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 800,
                        easing: 'ease-in-out',
                        once: true,
                        offset: 100
                    });
                }
            }

            function fireSideConfetti() {
                const colors = currentTheme === 'dark' ? ['#ffffff', '#cccccc', '#999999'] : ['#ff69b4', '#66ccff', '#ffc1e3'];

                if (window.confetti) {
                    confetti({
                        particleCount: 100,
                        angle: 60,
                        spread: 70,
                        origin: { x: 0, y: 0.6 },
                        colors
                    });
                    confetti({
                        particleCount: 100,
                        angle: 120,
                        spread: 70,
                        origin: { x: 1, y: 0.6 },
                        colors
                    });
                }
            }

            const countdown = document.getElementById('countdown');
            const birthdayDate = new Date('August 31, 2025 00:00:00').getTime();

            // Add this flag at the top with your other variables
let birthdayConfettiFired = false; // NEW: Flag to track if birthday confetti was already fired

// Then replace the updateCountdown function with this fixed version:
function updateCountdown() {
    const now = new Date().getTime();
    const gap = birthdayDate - now;

    if (gap <= 0) {
        document.querySelector('#countdown h2').innerHTML = 'ğŸ‰ It\'s Your Birthday! ğŸ‰';
        
        // FIXED: Only fire confetti once when birthday arrives
        if (!birthdayConfettiFired) {
            fireSideConfetti();
            birthdayConfettiFired = true; // Set flag to prevent repeated firing
        }
        return;
    }

    const second = 1000;
    const minute = second * 60;
    const hour = minute * 60;
    const day = hour * 24;
    const week = day * 7;

    const weeks = Math.floor(gap / week);
    const days = Math.floor((gap % week) / day);
    const hours = Math.floor((gap % day) / hour);
    const minutes = Math.floor((gap % hour) / minute);
    const seconds = Math.floor((gap % minute) / second);

    // Update individual countdown elements
    const weeksEl = document.getElementById('weeks-number');
    const daysEl = document.getElementById('days-number');
    const hoursEl = document.getElementById('hours-number');
    const minutesEl = document.getElementById('minutes-number');
    const secondsEl = document.getElementById('seconds-number');

    if (weeksEl) weeksEl.textContent = weeks;
    if (daysEl) daysEl.textContent = days;
    if (hoursEl) hoursEl.textContent = hours;
    if (minutesEl) minutesEl.textContent = minutes;
    if (secondsEl) secondsEl.textContent = seconds;

    updateLanguage();
}

            function toggleTheme() {
                currentTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.body.className = currentTheme + '-theme';
                localStorage.setItem('theme', currentTheme);
                fireSideConfetti();
                trackEvent(`Theme Toggled: ${currentTheme}`);
            }

            function openLightbox(src, alt) {
                const lightbox = document.getElementById('lightbox');
                const lightboxImg = document.getElementById('lightbox-img');
                lightboxImg.src = src;
                lightboxImg.alt = alt;
                lightbox.style.display = 'flex';
                trackEvent('Lightbox Opened');
            }

            function closeLightbox() {
                document.getElementById('lightbox').style.display = 'none';
                trackEvent('Lightbox Closed');
            }

            function updateLanguage() {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (translations[currentLang][key]) {
                        el.innerHTML = translations[currentLang][key];
                    }
                });
            }

            function setLanguage(lang) {
                currentLang = lang;
                updateLanguage();
                localStorage.setItem('language', lang);
                trackEvent(`Language Changed: ${lang}`);
            }

            function trackEvent(eventName) {
                console.log(`Event: ${eventName}`);
            }

            window.addEventListener('load', () => {
                document.body.className = currentTheme + '-theme';
                const savedLang = localStorage.getItem('language') || 'en';
                setLanguage(savedLang);
            });

            document.addEventListener('touchstart', function (e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });

            document.addEventListener('gesturestart', (e) => e.preventDefault());

            document.getElementById('lightbox').addEventListener('click', function (e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });

            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    closeLightbox();
                }
            });
            // Simple Redirect Button Logic (add to your existing script)
            document.addEventListener('DOMContentLoaded', function () {
                const redirectButton = document.getElementById('redirect-button');

                if (redirectButton) {
                    redirectButton.onclick = function () {
                        const buttonsSection = document.getElementById('content-buttons-section');
                        if (buttonsSection) {
                            buttonsSection.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }
                            
                    };
                }
            });

        </script>

    </div>
</body>

</html>
